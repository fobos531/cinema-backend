(this["webpackJsonpcinema-frontend"]=this["webpackJsonpcinema-frontend"]||[]).push([[0],{598:function(e,t,a){e.exports=a(860)},857:function(e,t){},860:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),o=a.n(c),i=a(38),l=a(41),s=a(19),u=a(121),m=a(6),d=a.n(m),p=a(9),f=a(26),g=a.n(f),b={headers:{Authorization:"Bearer ".concat(localStorage.getItem("userToken"))}},E=function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat("/api/misc","/seats/").concat(t),e.next=3,g.a.get(a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat("/api/misc","/ticketPrice/").concat(t),e.next=3,g.a.get(a);case 3:return n=e.sent,e.abrupt("return",n.data.ticketPrice);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(p.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat("/api/misc","/verifyToken"),e.next=3,g.a.get(t,b);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(p.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat("/api/misc","/verifyTokenAdmin"),e.next=3,g.a.get(t,b);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y={getAllSeatsByScreeningTimeId:E,getCinemaTicketPrice:v,verifyToken:h,verifyTokenAdmin:O},j=function(e){var t=e.component,a=Object(u.a)(e,["component"]),c=Object(n.useState)(!1),o=Object(s.a)(c,2),i=o[0],m=o[1],d=Object(n.useState)(!0),p=Object(s.a)(d,2),f=p[0],g=p[1];return Object(n.useEffect)((function(){y.verifyToken().then((function(e){1==e.authenticated&&m(!0),g(!1)})).catch((function(e){g(!1)}))}),[]),f?null:i?r.a.createElement(l.b,Object.assign({},a,{render:function(e){return r.a.createElement(t,e)}})):r.a.createElement(l.a,{to:"/login"})},w=function(e){var t=e.component,a=Object(u.a)(e,["component"]),c=Object(n.useState)(!1),o=Object(s.a)(c,2),i=o[0],m=o[1],d=Object(n.useState)(!0),p=Object(s.a)(d,2),f=p[0],g=p[1];return Object(n.useEffect)((function(){y.verifyTokenAdmin().then((function(e){console.log("response",e),m(e.authenticated),g(!1)})).catch((function(e){g(!1)}))}),[]),f?null:(console.log("authenticated:",i),i?r.a.createElement(l.b,Object.assign({},a,{render:function(e){return r.a.createElement(t,e)}})):0==i?r.a.createElement(l.a,{to:"/"}):void 0)},S=a(910),x=a(428),C=a(896),k=a(427),N=a(888),T=a(125),I=a(354),_=a(895),P=a(279),R=a.n(P),D=a(894),M=a(909),A=a(96),B=a(429),U=a(22),F=a(88),L=function(){return r.a.createElement(A.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(N.a,{color:"inherit",href:"https://github.com/fobos531"},"Jakov Glavina")," ",(new Date).getFullYear(),".")},W=function(e){return g.a.post("/api/login",e).then((function(e){return e.data})).catch((function(e){return e.response.data}))},H=a(11),G=a(5),V=a(892),Y=a(889),q=a(890),z=a(891),J=a(355),K=a(135),Q=a.n(K),X={headers:{Authorization:"Bearer ".concat(localStorage.getItem("userToken"))}},Z=function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={email:t.email,username:t.username,password:t.password,name:"".concat(t.firstName," ").concat(t.lastName)},e.next=3,g.a.post("/api/users",a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("".concat("/api/users","/totalUsers"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,g.a.put("/api/users",t,X);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.patch("/api/users",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae={register:Z,totalUsers:$,updateUser:ee,resetPassword:te},ne=function(e){return r.a.createElement(M.a,Object.assign({elevation:6,variant:"filled"},e))},re=Object(G.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,a=e.classes,n=e.onClose,c=Object(u.a)(e,["children","classes","onClose"]);return r.a.createElement(Y.a,Object.assign({disableTypography:!0,className:a.root},c),r.a.createElement(A.a,{variant:"h6"},t),n?r.a.createElement(J.a,{"aria-label":"close",className:a.closeButton,onClick:n},r.a.createElement(Q.a,null)):null)})),ce=Object(G.a)((function(e){return{root:{padding:e.spacing(2)}}}))(q.a),oe=Object(G.a)((function(e){return{root:{margin:0,padding:e.spacing(1)}}}))(z.a),ie={recoveryEmail:""},le=function(e){var t=e.setForgotPasswordOpened,a=Object(n.useState)(!0),c=Object(s.a)(a,2),o=c[0],i=c[1],l=function(){i(!1),t(!1)},u=Object(n.useState)(!1),m=Object(s.a)(u,2),d=m[0],p=m[1],f=function(e,t){p(!1)};return r.a.createElement("div",null,r.a.createElement(V.a,{onClose:l,"aria-labelledby":"customized-dialog-title",open:o},r.a.createElement(re,{id:"customized-dialog-title",onClose:l},"Forgot your password?"),r.a.createElement(ce,{dividers:!0},r.a.createElement(U.d,{initialValues:ie,onSubmit:function(e,t){var a=t.resetForm;console.log(e),ae.resetPassword(e).then((function(e){p(!0)})),a(ie)}},r.a.createElement(U.c,null,r.a.createElement(U.b,{name:"recoveryEmail",as:k.a,label:"Recovery email",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"recoveryEmail",autoComplete:"recoveryEmail"}),r.a.createElement(x.a,{type:"submit",onClick:function(){},color:"primary"},"Reset my password")))),r.a.createElement(oe,null,r.a.createElement(x.a,{autoFocus:!0,onClick:l,color:"primary"},"Close"))),r.a.createElement(D.a,{open:d,autoHideDuration:4e3,onClose:f},r.a.createElement(ne,{onClose:f,severity:"info"},"Your password has been reset! Please check your email for more details.")))},se=function(e){return r.a.createElement(M.a,Object.assign({elevation:6,variant:"filled"},e))},ue=Object(B.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/featured/?cinema)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2),width:"100%"}}})),me={email:"",password:""},de=function(){var e=ue(),t=Object(H.b)(),a=Object(H.c)((function(e){return e.authenticationState.loggedUser})),c=Object(n.useState)(!1),o=Object(s.a)(c,2),i=o[0],u=o[1],m=function(e,t){u(!1)},f=Object(l.g)(),g=Object(n.useState)(!1),b=Object(s.a)(g,2),E=b[0],v=b[1];return null!=a?r.a.createElement(l.a,{to:"/"}):r.a.createElement(_.a,{container:!0,component:"main",className:e.root},r.a.createElement(C.a,null),r.a.createElement(_.a,{item:!0,xs:!1,sm:4,md:6,className:e.image}),r.a.createElement(_.a,{item:!0,xs:12,sm:8,md:6,component:T.a,elevation:6,square:!0},r.a.createElement("div",{className:e.paper},r.a.createElement(S.a,{className:e.avatar},r.a.createElement(R.a,null)),r.a.createElement(A.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement(U.d,{validationSchema:Object(F.a)({email:Object(F.b)().required("You have to enter an e-mail!"),password:Object(F.b)().required("You have to enter a password!")}),initialValues:me,onSubmit:function(e){W(e).then((function(a){a.error?u(!0):(t(function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W(e);case 2:n=t.sent,console.log(n),n.error?a({type:"LOGIN_FAIL",payload:n}):a({type:"LOGIN_SUCCESS",payload:n});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e)),f.push("/"))}))}},r.a.createElement(U.c,{className:e.form},r.a.createElement(U.b,{name:"email",as:k.a,label:"E-mail",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",autoComplete:"email"}),r.a.createElement(U.a,{name:"email"}),r.a.createElement(U.b,{name:"password",as:k.a,label:"Password",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,type:"password",id:"password",autoComplete:"current-password"}),r.a.createElement(U.a,{name:"password"}),r.a.createElement("br",null),r.a.createElement(x.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Sign In"))),r.a.createElement(_.a,{container:!0},r.a.createElement(_.a,{item:!0,xs:!0},r.a.createElement(x.a,{onClick:function(){return v(!0)},variant:"body2"},"Forgot password?")),E&&r.a.createElement(le,{open:!0,setForgotPasswordOpened:v}),r.a.createElement(_.a,{item:!0},r.a.createElement(N.a,{href:"/register",variant:"body2"},"Don't have an account? Sign Up Here!"))),r.a.createElement(I.a,{mt:5},r.a.createElement(L,null)),r.a.createElement(D.a,{open:i,autoHideDuration:4e3,onClose:m},r.a.createElement(se,{onClose:m,severity:"error"},"Invalid email or password! Please check your input.")))))},pe=a(898),fe=function(e){return r.a.createElement(M.a,Object.assign({elevation:6,variant:"filled"},e))},ge=Object(B.a)((function(e){return{wholePage:{backgroundImage:"url(https://source.unsplash.com/featured/?cinema)",backgroundSize:"cover",width:"100vw",height:"100vh"},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}})),be={firstName:"",lastName:"",username:"",email:"",password:""},Ee=function(){var e=Object(H.c)((function(e){return e.authenticationState.loggedUser})),t=ge(),a=Object(H.b)(),c=Object(n.useState)(!1),o=Object(s.a)(c,2),i=o[0],u=o[1],m=function(e,t){u(!1)};return null!=e?r.a.createElement(l.a,{to:"/"}):r.a.createElement(pe.a,{component:"main",maxWidth:"xs",classes:t.wholePage},r.a.createElement(C.a,null),r.a.createElement("div",{className:t.paper},r.a.createElement(S.a,{className:t.avatar},r.a.createElement(R.a,null)),r.a.createElement(A.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement(U.d,{validationSchema:Object(F.a)({firstName:Object(F.b)().required("Please enter your first name!"),lastName:Object(F.b)().required("Please enter your last name!"),username:Object(F.b)().required("Please enter a desired username!"),email:Object(F.b)().required("Please enter your email!").email("You have to enter a valid email!"),password:Object(F.b)().required("Password is required!").min(4,"Password must be min 4 characters long!").max(30,"Password must be max 30 characters long!")}),initialValues:be,onSubmit:function(e,t){(0,t.resetForm)(be),a(function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ae.register(e);case 2:n=t.sent,console.log(n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e)),u(!0)}},r.a.createElement(U.c,{className:t.form},r.a.createElement(_.a,{container:!0,spacing:2},r.a.createElement(_.a,{item:!0,xs:12,sm:6},r.a.createElement(U.b,{name:"firstName",as:k.a,autoComplete:"fname",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name"}),r.a.createElement(U.a,{name:"firstName"})),r.a.createElement(_.a,{item:!0,xs:12,sm:6},r.a.createElement(U.b,{name:"lastName",as:k.a,variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",autoComplete:"lname"}),r.a.createElement(U.a,{name:"lastName"})),r.a.createElement(_.a,{item:!0,xs:12},r.a.createElement(U.b,{name:"username",as:k.a,variant:"outlined",required:!0,fullWidth:!0,id:"username",label:"Username",autoComplete:"username"}),r.a.createElement(U.a,{name:"username"})),r.a.createElement(_.a,{item:!0,xs:12},r.a.createElement(U.b,{name:"email",as:k.a,variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",autoComplete:"email"}),r.a.createElement(U.a,{name:"email"})),r.a.createElement(_.a,{item:!0,xs:12},r.a.createElement(U.b,{name:"password",as:k.a,variant:"outlined",required:!0,fullWidth:!0,label:"Password",type:"password",id:"password",autoComplete:"current-password"}),r.a.createElement(U.a,{name:"password"}))),r.a.createElement(x.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Sign Up"),r.a.createElement(_.a,{container:!0,justify:"flex-end"},r.a.createElement(_.a,{item:!0},r.a.createElement(N.a,{href:"/login",variant:"body2"},"Already have an account? Sign in")))))),r.a.createElement(I.a,{mt:5},r.a.createElement(L,null)),r.a.createElement(D.a,{open:i,autoHideDuration:4e3,onClose:m},r.a.createElement(fe,{onClose:m,severity:"success"},"Sucessfully registered! You may now log in using the button in the top right corner.")))},ve=a(76),he=a(10),Oe=a(3),ye=a(81),je=a(900),we=a(431),Se=a(868),xe=a(901),Ce=a(535),ke=a.n(Ce),Ne=a(536),Te=a.n(Ne),Ie=a(872),_e=a(899),Pe=a(430),Re=a(529),De=a.n(Re),Me=a(530),Ae=a.n(Me),Be=a(531),Ue=a.n(Be),Fe=a(533),Le=a.n(Fe),We=a(532),He=a.n(We),Ge=a(534),Ve=a.n(Ge),Ye=r.a.createElement("div",null,r.a.createElement(Ie.a,{button:!0,component:i.b,to:"/admin/dashboard"},r.a.createElement(_e.a,null,r.a.createElement(De.a,null)),r.a.createElement(Pe.a,{primary:"Dashboard"})),r.a.createElement(Ie.a,{button:!0,component:i.b,to:"/admin/cinemas"},r.a.createElement(_e.a,null,r.a.createElement(Ae.a,null)),r.a.createElement(Pe.a,{primary:"Cinemas"})),r.a.createElement(Ie.a,{button:!0,component:i.b,to:"/admin/movies"},r.a.createElement(_e.a,null,r.a.createElement(Ue.a,null)),r.a.createElement(Pe.a,{primary:"Movies"})),r.a.createElement(Ie.a,{button:!0,component:i.b,to:"/admin/screeningtimes"},r.a.createElement(_e.a,null,r.a.createElement(He.a,null)),r.a.createElement(Pe.a,{primary:"Screening times"})),r.a.createElement(Ie.a,{button:!0,component:i.b,to:"/admin/reservations"},r.a.createElement(_e.a,null,r.a.createElement(Le.a,null)),r.a.createElement(Pe.a,{primary:"Reservations"})),r.a.createElement(Ie.a,{button:!0,component:i.b,to:"/admin/statistics"},r.a.createElement(_e.a,null,r.a.createElement(Ve.a,null)),r.a.createElement(Pe.a,{primary:"Statistics"}))),qe=Object(B.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(he.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{marginTop:"4.5%",zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(ve.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)}}})),ze=function(e){var t=qe(),a=Object(n.useState)(!0),c=Object(s.a)(a,2),o=c[0],i=c[1],l=Object(n.useState)(),u=Object(s.a)(l,2),m=u[0],f=u[1];return Object(n.useEffect)((function(){(function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.totalUsers();case 2:t=e.sent.total,f(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),console.log(m),r.a.createElement("div",{className:t.root},r.a.createElement(C.a,null),r.a.createElement(je.a,{position:"absolute",className:Object(Oe.default)(t.appBar,o&&t.appBarShift)},r.a.createElement(we.a,{className:t.toolbar},r.a.createElement(J.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){i(!0)},className:Object(Oe.default)(t.menuButton,o&&t.menuButtonHidden)},r.a.createElement(ke.a,null)),r.a.createElement(A.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:t.title},"Dashboard"))),r.a.createElement(ye.a,{variant:"permanent",classes:{paper:Object(Oe.default)(t.drawerPaper,!o&&t.drawerPaperClose)},open:o},r.a.createElement("div",{className:t.toolbarIcon},r.a.createElement(J.a,{onClick:function(){i(!1)}},r.a.createElement(Te.a,null))),r.a.createElement(xe.a,null),r.a.createElement(Se.a,null,Ye),r.a.createElement(xe.a,null)),r.a.createElement("main",{className:t.content},r.a.createElement("div",{className:t.appBarSpacer}),r.a.createElement(pe.a,{maxWidth:"lg",className:t.container},e.children,r.a.createElement(I.a,{pt:4},r.a.createElement(L,null)))))},Je=a(876),Ke=a(356),Qe=a(357),Xe=a(902),Ze=a(537),$e=a.n(Ze),et=a(538),tt=a.n(et),at=function(e){return r.a.createElement(M.a,Object.assign({elevation:6,variant:"filled"},e))},nt=Object(B.a)((function(e){return{form:{width:"35%",margin:e.spacing(2)},saveButton:{marginBottom:e.spacing(2)},passwordField:{width:"100%"}}})),rt=function(e){var t=e.loggedUser,a=nt(),c=Object(H.b)();console.log(t);var o=Object(n.useState)(!1),i=Object(s.a)(o,2),l=i[0],u=i[1],m=function(e,t){u(!1)},f=Object(n.useState)({fullName:t.name,email:t.email,showPassword:!1}),g=Object(s.a)(f,2),b=g[0],E=g[1],v=function(e){E(Object(he.a)(Object(he.a)({},b),{},Object(ve.a)({},e.target.id,e.target.value))),console.log(b)},h=function(){var e,a;e=Object(he.a)(Object(he.a)({},b),{},{id:t.id}),console.log(e),c((a=e,function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.updateUser(a);case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),document.getElementById("fullName").value="",document.getElementById("email").value="",document.getElementById("password").value="",u(!0)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(U.d,null,r.a.createElement(U.c,{className:a.form},r.a.createElement(U.b,{as:k.a,label:"Name",variant:"outlined",margin:"normal",fullWidth:!0,defaultValue:t.name,id:"fullName",placeholder:"new name",autoComplete:"fullName",onChange:function(e){return v(e)}}),r.a.createElement(U.b,{as:k.a,label:"E-mail",variant:"outlined",margin:"normal",defaultValue:t.email,fullWidth:!0,id:"email",placeholder:"new e-mail",autoComplete:"email",onChange:function(e){return v(e)}}),r.a.createElement(Ke.a,{variant:"outlined",className:a.passwordField},r.a.createElement(Qe.a,{htmlFor:"password"},"Password"),r.a.createElement(U.b,{as:Je.a,id:"password",label:"Password",placeholder:"new password",type:b.showPassword?"text":"password",onChange:function(e){return v(e)},endAdornment:r.a.createElement(Xe.a,{position:"end"},r.a.createElement(J.a,{"aria-label":"toggle password visibility",onClick:function(){E(Object(he.a)(Object(he.a)({},b),{},{showPassword:!b.showPassword}))},onMouseDown:function(e){e.preventDefault()},edge:"end"},b.showPassword?r.a.createElement($e.a,null):r.a.createElement(tt.a,null)))})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(x.a,{variant:"contained",color:"primary",onClick:function(){return h()},className:a.saveButton},"Save changes"))),r.a.createElement(D.a,{open:l,autoHideDuration:4e3,onClose:m},r.a.createElement(at,{onClose:m,severity:"success"},"Password sucessfully changed!")))},ct=Object(B.a)((function(e){return{title:{display:"block"},center:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}}})),ot=function(){var e=ct(),t=Object(H.c)((function(e){return e.authenticationState.loggedUser}));return 0===Object.keys(t).length&&JSON.parse(localStorage.getItem("loggedUser"))&&(t=JSON.parse(localStorage.getItem("loggedUser"))),r.a.createElement("div",{className:e.center},r.a.createElement("h1",{className:e.title},"Hi, ",t.name,"!"),r.a.createElement("br",null),r.a.createElement(rt,{loggedUser:t,className:e.UserInfoForm}))},it=Object(B.a)((function(e){return{"@global":{ul:{margin:0,padding:0,listStyle:"none"}},appBar:{borderBottom:"1px solid ".concat(e.palette.divider),flex:1,flexDirection:"row"},toolbar:{width:"100%",alignSelf:"center",justifyContent:"center"},link:{margin:e.spacing(1)},linkButton:{alignSelf:"flex-end"}}})),lt=function(){var e=Object(H.b)(),t=Object(l.g)(),a=Object(H.c)((function(e){return e.authenticationState.loggedUser}));null==a&&JSON.parse(localStorage.getItem("loggedUser"))&&e({type:"SET_ACTIVE_USER",payload:JSON.parse(localStorage.getItem("loggedUser"))});var n=it();return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,null),r.a.createElement(je.a,{position:"static",color:"default",elevation:0,className:n.appBar},r.a.createElement(we.a,{className:n.toolbar},r.a.createElement("nav",null,r.a.createElement(i.b,{component:N.a,variant:"button",color:"textPrimary",to:"/",className:n.link},"Home"),r.a.createElement(i.b,{component:N.a,variant:"button",color:"textPrimary",to:"/movies",className:n.link},"Movies"),null!=a&&r.a.createElement(i.b,{component:N.a,variant:"button",color:"textPrimary",to:"/user/reservations",className:n.link},"My reservations"),null!=a&&r.a.createElement(i.b,{component:N.a,variant:"button",color:"textPrimary",to:"/user/dashboard",className:n.link},"Settings"),null!=a&&"administrator"==a.user_type&&r.a.createElement(i.b,{component:N.a,variant:"button",color:"textPrimary",to:"/admin/dashboard",className:n.link},"Admin dashboard"))),null!=a&&r.a.createElement(x.a,{component:x.a,variant:"outlined",color:"primary",onClick:function(){localStorage.removeItem("loggedUser"),localStorage.removeItem("userToken"),e({type:"LOGOUT"}),t.push("/")},className:"".concat(n.link," ").concat(n.loginButton)},"Logout"),null==a&&r.a.createElement(r.a.Fragment,null,r.a.createElement(i.b,{component:x.a,variant:"outlined",color:"primary",to:"/login",className:"".concat(n.link," ").concat(n.loginButton)},"Login"),r.a.createElement(i.b,{component:x.a,variant:"outlined",color:"primary",to:"/register",className:"".concat(n.link," ").concat(n.loginButton)},"Register"))))},st=a(290),ut=a(904),mt=a(907),dt=a(906),pt=a(905),ft=a(102),gt=a.n(ft),bt={addCinema:function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),a={headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(localStorage.getItem("userToken"))}},e.next=4,g.a.post("/api/cinemas",t,a);case 4:return n=e.sent,e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),allCinemas:function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("/api/cinemas");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),deleteCinema:function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:"Bearer ".concat(localStorage.getItem("userToken"))}},e.next=3,g.a.delete("".concat("/api/cinemas","/").concat(t),a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Et=function(){return function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bt.allCinemas();case 2:a=e.sent,t({type:"GET_CINEMAS",payload:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},vt=function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,bt.addCinema(e);case 2:n=t.sent,a({type:"ADD_NEW_CINEMA",payload:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ht=Object(B.a)((function(e){return{cardGrid:{paddingTop:e.spacing(8),paddingBottom:e.spacing(8)},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"30.25%"},cardContent:{flexGrow:1}}})),Ot=function(e){var t=e.cinema,a=Object(H.b)(),n=ht();return r.a.createElement(ut.a,{className:n.card},r.a.createElement(pt.a,{className:n.cardMedia,image:"".concat(t.image),title:"Cinema image"}),r.a.createElement(dt.a,{className:n.cardContent},r.a.createElement(A.a,{gutterBottom:!0,variant:"h5",component:"h2"},"".concat(t.name)),r.a.createElement(A.a,null,"".concat(t.postalCode,", ").concat(t.city)),r.a.createElement(J.a,{onClick:function(){return a((e=t.id,function(){var t=Object(p.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,bt.deleteCinema(e);case 2:a(Et());case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));var e}},r.a.createElement(gt.a,null))),r.a.createElement(mt.a,null))},yt=function(e){return r.a.createElement(A.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0},e.children)},jt=Object(B.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},Paper:{height:"fit-content"},filePicker:{height:"50%"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2),width:"100%"}}})),wt=function(){var e=Object(H.b)(),t=jt(),a=Object(n.useState)(),c=Object(s.a)(a,2),o=c[0],i=c[1],l=Object(n.useState)({}),u=Object(s.a)(l,2),m=u[0],f=u[1],g=function(e){f(Object(he.a)(Object(he.a)({},m),{},Object(ve.a)({},e.target.id,e.target.value))),console.log(m)},b=function(){var t=Object(p.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(a=new FormData).append("cinemaName",m.cinemaName),a.append("city",m.city),a.append("postalCode",m.postalCode),a.append("numberOfSeats",m.numberOfSeats),a.append("ticketPrice",m.ticketPrice),a.append("image",o),e(vt(a)),document.getElementById("cinemaName").value="",document.getElementById("numberOfSeats").value="",document.getElementById("ticketPrice").value="",document.getElementById("city").value="",document.getElementById("postalCode").value="";case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(yt,null,"ADD NEW CINEMA"),r.a.createElement(U.d,null,r.a.createElement(U.c,{className:t.form},r.a.createElement(U.b,{name:"cinemaName",as:k.a,label:"Cinema name",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"cinemaName",autoComplete:"cinemaName",onChange:function(e){return g(e)}}),r.a.createElement(U.b,{name:"numberOfSeats",as:k.a,label:"No. of seats",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"numberOfSeats",autoComplete:"numberOfSeats",onChange:function(e){return g(e)}}),r.a.createElement(U.b,{name:"ticketPrice",as:k.a,label:"Ticket price per seat",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"ticketPrice",autoComplete:"ticketPrice",onChange:function(e){return g(e)}}),r.a.createElement(U.b,{name:"city",as:k.a,label:"City",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"city",autoComplete:"city",onChange:function(e){return g(e)}}),r.a.createElement(U.b,{name:"postalCode",as:k.a,label:"Postal code",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"postalCode",autoComplete:"postalCode",onChange:function(e){return g(e)}}),r.a.createElement(st.a,{acceptedFiles:["image/*"],dropzoneText:"Drag and drop an image here or click",onChange:function(e){return i(e[0])}}),r.a.createElement(x.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(){b()}},"Add cinema"))))},St=function(){var e=Object(H.b)(),t=jt(),a=Object(Oe.default)(t.paper,t.fixedHeight),c=Object(H.c)((function(e){return e.cinemaState}));return Object(n.useEffect)((function(){e(Et())}),[]),r.a.createElement(_.a,{container:!0,spacing:3},r.a.createElement(_.a,{item:!0,xs:12,md:12,lg:12},r.a.createElement(T.a,{className:"".concat(a," ").concat(t.Paper)},r.a.createElement(wt,null))),r.a.createElement(_.a,{item:!0,xs:12,md:12,lg:12},r.a.createElement(T.a,{className:"".concat(a," ").concat(t.Paper)},c.cinemas.map((function(e){return r.a.createElement(Ot,{key:e.id,cinema:e})})))))},xt=Object(B.a)({depositContext:{flex:1}}),Ct=function(e){var t=e.count,a=xt();return r.a.createElement(r.a.Fragment,null,r.a.createElement(yt,null,"Total users"),r.a.createElement(A.a,{component:"p",variant:"h5"},t," users"),r.a.createElement(A.a,{color:"textSecondary",className:a.depositContext},"since 10 July, 2020"))},kt=function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),a={headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(localStorage.getItem("userToken"))}},e.next=4,g.a.post("/api/movies",t,a);case 4:return n=e.sent,e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Nt=function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("/api/movies");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Tt=function(){var e=Object(p.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:"Bearer ".concat(localStorage.getItem("userToken"))}},e.next=3,g.a.get("".concat("/api/movies","/moviesRated"),t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),It={addMovie:kt,allMovies:Nt,deleteMovie:function(){var e=Object(p.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:"Bearer ".concat(localStorage.getItem("userToken"))}},e.next=3,g.a.delete("".concat("/api/movies","/").concat(t),a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getMovieById:function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("".concat("/api/movies","/").concat(t)),e.next=3,g.a.get("".concat("/api/movies","/").concat(t));case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),moviesRated:Tt},_t=function(){return function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,It.allMovies();case 2:a=e.sent,t({type:"GET_MOVIES",payload:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Pt=function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,It.addMovie(e);case 2:n=t.sent,a({type:"ADD_NEW_MOVIE",payload:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Rt=function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,It.getMovieById(e);case 2:n=t.sent,a({type:"GET_MOVIE_BY_ID",payload:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Dt={headers:{Authorization:"Bearer ".concat(localStorage.getItem("userToken"))}},Mt={setOccupiedSeats:function(){var e=Object(p.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat("/api/reservations","/screeningTime/").concat(t),console.log(n,a),e.next=4,g.a.patch(n,a,Dt);case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),saveReservation:function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,g.a.post("/api/reservations",t,Dt);case 3:return a=e.sent,console.log("response",a.data),e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),allReservations:function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("/api/reservations",Dt);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getReservationsForUser:function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("".concat("/api/reservations","/").concat(t)),e.next=3,g.a.get("".concat("/api/reservations","/").concat(t),Dt);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),rateReservation:function(){var e=Object(p.a)(d.a.mark((function e(t,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.patch("".concat("/api/reservations","/rate/").concat(t),a,Dt);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},At=function(){return function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mt.allReservations();case 2:a=e.sent,t({type:"GET_RESERVATIONS",payload:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Bt=function(e,t){return function(){var a=Object(p.a)(d.a.mark((function a(n){var r;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Mt.rateReservation(e,{rating:t});case 2:r=a.sent,n({type:"RATE_RESERVATION",payload:r});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},Ut=Object(B.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"row",justifyContent:"center"},fixedHeight:{height:240}}})),Ft=function(){Object(H.b)();var e=Ut();return r.a.createElement(_.a,{container:!0,spacing:3},r.a.createElement(_.a,{item:!0,xs:12},r.a.createElement(T.a,{className:e.paper},r.a.createElement(A.a,{variant:"h2",component:"h2"},"Welcome back, ",JSON.parse(localStorage.getItem("loggedUser")).name,"!"))))},Lt=Object(B.a)((function(e){return{cardGrid:{paddingTop:e.spacing(8),paddingBottom:e.spacing(8)},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"30.25%"},cardContent:{flexGrow:1}}})),Wt=function(e){var t=e.movie,a=Object(H.b)(),n=Lt();return r.a.createElement(ut.a,{className:n.card},r.a.createElement(pt.a,{className:n.cardMedia,image:"".concat(t.backdropImage),title:"Movie image"}),r.a.createElement(dt.a,{className:n.cardContent},r.a.createElement(A.a,{gutterBottom:!0,variant:"h5",component:"h2"},"".concat(t.title)),r.a.createElement(A.a,null,"".concat(new Date(t.releaseDate).getFullYear())),r.a.createElement(J.a,{onClick:function(){return a((e=t.id,function(){var t=Object(p.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,It.deleteMovie(e);case 2:a(_t());case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));var e}},r.a.createElement(gt.a,null))),r.a.createElement(mt.a,null))},Ht=Object(B.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},Paper:{height:"fit-content"},filePicker:{height:"50%"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2),width:"100%"}}})),Gt=function(){var e=Object(H.b)(),t=Ht(),a=Object(n.useState)(),c=Object(s.a)(a,2),o=c[0],i=c[1],l=Object(n.useState)({}),u=Object(s.a)(l,2),m=u[0],f=u[1],g=function(){var t=Object(p.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(a=new FormData).append("movieName",m.movieName),a.append("moviePoster",o),e(Pt(a)),document.getElementById("movieName").value="";case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(yt,null,"ADD NEW MOVIE"),r.a.createElement(U.d,null,r.a.createElement(U.c,{className:t.form},r.a.createElement(U.b,{name:"movieName",as:k.a,label:"Movie name",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"movieName",autoComplete:"movieName",onChange:function(e){return function(e){f(Object(he.a)(Object(he.a)({},m),{},Object(ve.a)({},e.target.id,e.target.value))),console.log(m)}(e)}}),r.a.createElement(st.a,{acceptedFiles:["image/*"],dropzoneText:"Drag and drop movie poster here or click",onChange:function(e){return i(e[0])}}),r.a.createElement(x.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(){g()}},"Add movie"))))},Vt=function(){var e=Object(H.b)(),t=Ht(),a=Object(Oe.default)(t.paper,t.fixedHeight),c=Object(H.c)((function(e){return e.movieState}));return Object(n.useEffect)((function(){e(_t())}),[]),r.a.createElement(_.a,{container:!0,spacing:2},r.a.createElement(_.a,{item:!0,xs:12,md:12,lg:12},r.a.createElement(T.a,{className:"".concat(a," ").concat(t.Paper)},r.a.createElement(Gt,null)),r.a.createElement(T.a,{className:"".concat(a," ").concat(t.Paper)},c.movies&&c.movies.map((function(e){return r.a.createElement(Wt,{key:e.id,movie:e})})))))},Yt=a(298),qt=a.n(Yt),zt=a(545),Jt=a.n(zt),Kt=Object(B.a)((function(e){return{wholePage:{width:"100vw",height:"100vh",color:"white",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"5em"}}})),Qt=function(){var e=Kt();return r.a.createElement(Jt.a,{videoId:"cySqH7j6RlI",overlay:"rgba(0,0,0,.85)",className:e.wholePage,playerOptions:{showinfo:0}},r.a.createElement(qt.a,{avgTypingDelay:60,startDelay:1e3},r.a.createElement("span",null,"Welcome to our Cinema!"),r.a.createElement(qt.a.Backspace,{count:22,delay:200}),r.a.createElement("span",null,'Start by clicking the "Movies" tab above.'),r.a.createElement(qt.a.Backspace,{count:71}),r.a.createElement("span",null,"Enjoy your stay!")))},Xt=a(437),Zt=a(359),$t={headers:{Authorization:"Bearer ".concat(localStorage.getItem("userToken"))}},ea={addScreeningTime:function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,g.a.post("/api/screeningtimes",t,$t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),allScreeningTimes:function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("/api/screeningtimes",$t);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),deleteScreeningTime:function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.delete("".concat("/api/screeningtimes","/").concat(t),$t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteMany:function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("".concat("/api/screeningtimes","/deleteMany"),$t);case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},ta=function(){return function(){var e=Object(p.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ea.allScreeningTimes();case 2:a=e.sent,t({type:"GET_SCREENING_TIMES",payload:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},aa=function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),t.next=3,ea.addScreeningTime(e);case 3:a(ta());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},na=a(432),ra=a(436),ca=a(435),oa=a(908),ia=a(433),la=a(434),sa=a(324),ua=Object(B.a)({table:{minWidth:650}}),ma=function(e){var t=e.screeningTimes,a=ua(),n=Object(H.b)();return r.a.createElement(oa.a,{component:T.a},r.a.createElement(na.a,{className:a.table,"aria-label":"simple table"},r.a.createElement(ia.a,null,r.a.createElement(la.a,null,r.a.createElement(ca.a,null,"Movie"),r.a.createElement(ca.a,{align:"right"},"Cinema"),r.a.createElement(ca.a,{align:"right"},"Start time"),r.a.createElement(ca.a,{align:"right"},"End time"),r.a.createElement(ca.a,{align:"right"}))),r.a.createElement(ra.a,null,t.map((function(e){return r.a.createElement(la.a,{key:e.id},r.a.createElement(ca.a,{align:"left"},e.movie_id.title),r.a.createElement(ca.a,{align:"right"},e.cinema_id.name),r.a.createElement(ca.a,{align:"right"},sa(e.datetime_start).format("MMMM Do YYYY, HH:mm")),r.a.createElement(ca.a,{align:"right"},sa(e.datetime_end).format("MMMM Do YYYY, HH:mm")),r.a.createElement(ca.a,{align:"right"},r.a.createElement(J.a,{onClick:function(){return n((t=e.id,function(){var e=Object(p.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ea.deleteScreeningTime(t);case 2:a(ta());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));var t}},r.a.createElement(gt.a,null))))})))))},da=Object(B.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},Paper:{height:"fit-content"},filePicker:{height:"50%"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2),width:"100%"},formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}})),pa=function(e){return r.a.createElement(M.a,Object.assign({elevation:6,variant:"filled"},e))},fa=function(e){var t=e.screeningTimes,a=e.setOpen,c=Object(H.b)(),o=da();Object(n.useEffect)((function(){c(Et()),c(_t())}),[]);var i=Object(H.c)((function(e){return e.movieState})),l=Object(H.c)((function(e){return e.cinemaState})),u=Object(n.useState)(""),m=Object(s.a)(u,2),f=m[0],g=m[1],b=Object(n.useState)(""),E=Object(s.a)(b,2),v=E[0],h=E[1],O=Object(n.useState)({}),y=Object(s.a)(O,2),j=y[0],w=y[1],S=function(e){w(Object(he.a)(Object(he.a)({},j),{},Object(ve.a)({},e.target.id,e.target.value))),console.log(j)},C=function(){var e=Object(p.a)(d.a.mark((function e(){var n,r,o,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new Date(j.datetime_start).getTime(),r=new Date(j.datetime_end).getTime(),o=!1,t.forEach((function(e){console.log(e);var t=new Date(e.datetime_start).getTime(),a=new Date(e.datetime_end).getTime();e.cinema_id.name==document.getElementById("cinemaSelect").innerText&&(t>n&&t<r||n>t&&n<a)&&(o=!0)})),o?a(!0):(i={movie:f,cinema:v,datetime_start:j.datetime_start,datetime_end:j.datetime_end},c(aa(i)));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(yt,null,"ADD NEW SCREENING TIME"),r.a.createElement("form",null,r.a.createElement(Ke.a,{id:"movieSelector",className:o.formControl},r.a.createElement(Qe.a,{id:"movieLabel"},"Movie"),r.a.createElement(Zt.a,{labelId:"movieLabel",id:"movieSelect",value:f,onChange:function(e){g(e.target.value)}},i.movies.map((function(e){return r.a.createElement(Xt.a,{key:e.id,value:e.id},e.title)})))),r.a.createElement("br",null),r.a.createElement(Ke.a,{id:"cinemaSelector",className:o.formControl},r.a.createElement(Qe.a,{id:"cinemaLabel"},"Cinema"),r.a.createElement(Zt.a,{labelId:"cinemaLabel",id:"cinemaSelect",value:v,onChange:function(e){h(e.target.value)}},l.cinemas.map((function(e){return r.a.createElement(Xt.a,{key:e.id,id:e.id,value:e.id},e.name)})))),r.a.createElement(k.a,{name:"datetime_start",variant:"outlined",type:"datetime-local",margin:"normal",required:!0,fullWidth:!0,id:"datetime_start",autoComplete:"datetime_start",onChange:function(e){return S(e)}}),r.a.createElement(k.a,{name:"datetime_end",variant:"outlined",margin:"normal",type:"datetime-local",required:!0,fullWidth:!0,id:"datetime_end",autoComplete:"datetime_end",onChange:function(e){return S(e)}}),r.a.createElement(x.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",className:o.submit,onClick:function(){C()}},"Add screeening time")))},ga=function(){var e=Object(H.b)(),t=Object(n.useState)(!1),a=Object(s.a)(t,2),c=a[0],o=a[1],i=function(e,t){o(!1)},l=da(),u=Object(Oe.default)(l.paper,l.fixedHeight),m=Object(H.c)((function(e){return e.screeningTimeState.screening_times}));return Object(n.useEffect)((function(){e(ta())}),[]),r.a.createElement(_.a,{container:!0,spacing:3},r.a.createElement(_.a,{item:!0,xs:12,md:12,lg:12},r.a.createElement(T.a,{className:"".concat(u," ").concat(l.Paper)},r.a.createElement(fa,{screeningTimes:m,setOpen:o}))),r.a.createElement(_.a,{item:!0,xs:12,md:12,lg:12},r.a.createElement(T.a,{className:"".concat(u," ").concat(l.Paper)},r.a.createElement(ma,{screeningTimes:m})),r.a.createElement(D.a,{open:c,autoHideDuration:4e3,onClose:i},r.a.createElement(pa,{onClose:i,severity:"error"},"Screening time overlaps! Please specify another screening time parameters!"))))},ba=a(127),Ea=Object(B.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}})),va=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],c=t[1],o=a,i=Object(H.b)(),l=Ea(),u=Object(n.useState)(),m=Object(s.a)(u,2),f=m[0],g=m[1];Object(n.useEffect)((function(){(function(){var e=Object(p.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.totalUsers();case 2:return t=e.sent.total,e.next=5,It.moviesRated();case 5:a=e.sent,c(a),g(t),i(Et()),i(_t()),i(At());case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),console.log("movie data",a);var b=Object(H.c)((function(e){return e.cinemaState.cinemas})),E=Object(H.c)((function(e){return e.movieState.movies})),v=Object(H.c)((function(e){return e.reservationsState.reservations})),h=Object(Oe.default)(l.paper,l.fixedHeight);return r.a.createElement(_.a,{container:!0,spacing:3},r.a.createElement(_.a,{item:!0,xs:12,md:8,lg:9},r.a.createElement(T.a,{className:h},r.a.createElement(yt,null,"Total cinemas: ",b.length),r.a.createElement(yt,null,"Total movies: ",E.length),r.a.createElement(yt,null,"Total reservations: ",v.length))),r.a.createElement(_.a,{item:!0,xs:12,md:4,lg:3},r.a.createElement(T.a,{className:h},r.a.createElement(Ct,{count:f}))),r.a.createElement(_.a,{item:!0,xs:12},r.a.createElement(T.a,{className:l.paper},"Ratings of movies",r.a.createElement(ba.b,{width:730,height:250,data:o},r.a.createElement(ba.c,{strokeDasharray:"3 3"}),r.a.createElement(ba.f,{dataKey:"title"}),r.a.createElement(ba.g,null),r.a.createElement(ba.e,null),r.a.createElement(ba.d,null),r.a.createElement(ba.a,{dataKey:"Summed rating",fill:"#8884d8"})))))},ha=a(284),Oa=a.n(ha),ya=a(911),ja=Object(B.a)({table:{minWidth:650}}),wa=function(e){var t=e.reservations,a=(ja(),["User","Movie","Cinema","Seats","Total price",{name:"User rating",options:{filter:!1,sort:!1,empty:!0,customBodyRenderLite:function(e){return r.a.createElement(ya.a,{defaultValue:t[e].ownRating?t[e].ownRating:0,readOnly:!0,max:5,name:t[e].id})}}}]),n=[];t.map((function(e){var t=e.seats.map((function(e){return e.seat_name})).join(", ");console.log(e),n.push([e.user_id.name,e.screeningTime_id.movie_id.title,e.screeningTime_id.cinema_id.name,t,"$".concat(e.totalPrice)])})),console.log(n);return r.a.createElement(Oa.a,{title:"Reservations",data:n,columns:a,options:{filterType:"checkbox",selectableRows:!1}})},Sa=Object(B.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},Paper:{height:"fit-content"},filePicker:{height:"50%"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2),width:"100%"},formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}})),xa=function(){var e=Object(H.b)(),t=Sa(),a=Object(Oe.default)(t.paper,t.fixedHeight),c=Object(H.c)((function(e){return e.reservationsState.reservations}));return Object(n.useEffect)((function(){e(At())}),[]),r.a.createElement(_.a,{container:!0,spacing:3},r.a.createElement(_.a,{item:!0,xs:12,md:12,lg:12},r.a.createElement(T.a,{className:"".concat(a," ").concat(t.Paper)},r.a.createElement(wa,{reservations:c}))))},Ca=a(875),ka=function(e){return function(){var t=Object(p.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.getAllSeatsByScreeningTimeId(e);case 2:n=t.sent,a({type:"GET_SEATS_FOR_SELECTED_SCREENING_TIME",payload:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Na=function(e,t){return function(){var a=Object(p.a)(d.a.mark((function a(n){var r;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Mt.setOccupiedSeats(e,t);case 2:r=a.sent,n({type:"SET_OCCUPIED_SEATS",payload:r});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},Ta=a(258),Ia=a(56),_a=a(912),Pa=a(897),Ra=a(280),Da=a.n(Ra),Ma=a(822),Aa=Object(G.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,a=e.classes,n=e.onClose,c=Object(u.a)(e,["children","classes","onClose"]);return r.a.createElement(Y.a,Object.assign({disableTypography:!0,className:a.root},c),r.a.createElement(A.a,{variant:"h6"},t),n?r.a.createElement(J.a,{"aria-label":"close",className:a.closeButton,onClick:n},r.a.createElement(Q.a,null)):null)})),Ba=Object(G.a)((function(e){return{root:{padding:e.spacing(2)}}}))(q.a),Ua=Object(G.a)((function(e){return{root:{margin:0,padding:e.spacing(1)}}}))(z.a),Fa=function(e){var t=Object(n.useState)(!0),a=Object(s.a)(t,2),c=a[0],o=a[1];console.log("openstate",c);var i=function(){o(!1)};return r.a.createElement("div",null,r.a.createElement(V.a,{onClose:i,"aria-labelledby":"customized-dialog-title",open:c},r.a.createElement(Aa,{id:"customized-dialog-title",onClose:i},"Reservation successful! ",r.a.createElement(Da.a,null)),r.a.createElement(Ba,{dividers:!0},r.a.createElement(Ma,{id:"generatedQRCode",value:JSON.stringify(e.finishedReservation),size:400,bgColor:"#FFFFFF",fgColor:"#000000",level:"H",includeMargin:!0,renderAs:"canvas"})),r.a.createElement(Ua,null,r.a.createElement(x.a,{onClick:function(){var e=document.getElementById("generatedQRCode").toDataURL("image/png").replace("image/png","image/octet-stream"),t=document.createElement("a");t.href=e,t.download="YourReservation.png",document.body.appendChild(t),t.click(),document.body.removeChild(t)},color:"primary"},"Download QR Code"),r.a.createElement(x.a,{autoFocus:!0,onClick:i,color:"primary"},"Close"))))},La=a(555),Wa=function(e){var t=e.amount,a=e.onSuccess,n=e.currency;return r.a.createElement(La.PayPalButton,{amount:t,currency:n,onSuccess:function(e,t){return a(e,t)},disableCard:"visa",options:{clientId:"Af0XV-i25rxOtLgVVAFf5tDQ6kUPrvnA4AVmLc75EdfcvQONdI1wmJZ-evLhB9sZHMwcU246CKRPpmo6"}})},Ha=Object(Ta.a)("div")(Object(Ia.a)(_a.b,Pa.a)),Ga=Object(Ca.a)((function(e){return{seat:{cursor:"pointer",color:"rgba(255,255,255,0.7)",borderRadius:2,fontWeight:600,"&:hover":{background:"rgb(120, 205, 4)"},display:"inline-block",height:"20%"},row:{display:"flex",justifyContent:"center",width:"100%",height:"100%"},seatContainer:{display:"flex",justifyContent:"center",width:"100%"},allSeatsContainer:{display:"flex",justifyContent:"center"},seatInfoContainer:{width:"100%",margin:"auto",display:"flex",alignItems:"center",textAlign:"center",color:"#eee"},seatInfoLabel:{display:"inline-block",width:13,height:10,padding:"2%"},seatInfo:{margin:"8px"},occupiedDisabledSeat:{pointerEvents:"none"},makeReservationButton:{display:"inline-block",whiteSpace:"no-wrap",margin:"3%"}}})),Va=function(e){var t=e.selectedScreeningTime,a=Object(H.c)((function(e){return e.reservationProcessState.currentReservation.screeningTime_id})),c=Object(H.b)(),o=Object(n.useState)(!1),i=Object(s.a)(o,2),l=i[0],u=i[1],m=Object(H.c)((function(e){return e.reservationProcessState.currentReservation})),f=Object(n.useState)(!1),g=Object(s.a)(f,2),b=g[0],E=g[1],v=Object(H.c)((function(e){return e.reservationProcessState.seatsForSelectedScreeningTime})),h=Object(n.useState)([]),O=Object(s.a)(h,2),y=O[0],j=O[1],w=Object(n.useState)(null),S=Object(s.a)(w,2),C=S[0],k=S[1],N=Ga();Object(n.useEffect)((function(){(function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(ka(t));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a]),Object(n.useEffect)((function(){0!=v.length&&j(v)}),[v]);for(var T=[],I=[],P=0;P<v.length;P++)0!=P?P%7!=0?I.push(v[P]):(T.push(I),(I=[]).push(v[P])):I.push(v[P]);I!=[]&&T.push(I);console.log("rowed seats",T);var R=y.filter((function(e){return 1==e.occupied}));return console.log("picked seats",R),console.log("finishedReservation",C),r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,{container:!0,spacing:4,className:N.allSeatsContainer},T.length>0&&T.map((function(e,t){return r.a.createElement(_.a,{key:t,container:!0,item:!0,spacing:5,className:N.row},e.map((function(e){return r.a.createElement(Ha,{key:"seat-".concat(e.id),width:"75%",margin:2,onClick:function(){return function(e){console.log(document.getElementById("totalPrice").textContent);var t=y.find((function(t){return t.id==e}));0==t.occupied?t.occupied=1:t.occupied=0,j(y.map((function(a){return a.id==e?t:a}))),c(function(e){return{type:"SET_PICKED_SEATS",payload:e}}(y))}(e.id)},className:"".concat(N.seat," ").concat(2==e.occupied?N.occupiedDisabledSeat:""),bgcolor:2==e.occupied?"rgb(228, 0, 0)":1==e.occupied?"rgb(120, 205, 4)":"rgb(96, 93, 169)"},e.seat_name)})))})),!l&&r.a.createElement(Wa,{amount:m.totalPrice,currency:"USD",onSuccess:function(e,t){u(!0),c({type:"SET_ORDER_ID",payload:t.orderID})}}),l&&r.a.createElement(x.a,{type:"button",variant:"contained",color:"primary",className:N.makeReservationButton,onClick:Object(p.a)(d.a.mark((function e(){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=y.map((function(e){return 1==e.occupied&&(e.occupied=2),e})),c(Na(t,a)),e.next=4,Mt.saveReservation(Object(he.a)(Object(he.a)({},m),{},{pickedSeats:R}));case 4:n=e.sent,k(n),E(!0);case 7:case"end":return e.stop()}}),e)})))},"Finish reservation"),b&&null!=C&&r.a.createElement(Fa,{initialOpenState:!0,finishedReservation:C})),r.a.createElement(_.a,{container:!0,className:N.seatContainer},r.a.createElement(_.a,{item:!0,className:N.seatInfo},r.a.createElement("div",{className:N.seatInfoLabel,style:{background:"rgb(96, 93, 169)"}}),"Available seat"),r.a.createElement(_.a,{item:!0,className:N.seatInfo},r.a.createElement("div",{className:N.seatInfoLabel,style:{background:"rgb(228, 0, 0)"}}),"Occupied Seat"),r.a.createElement(_.a,{className:N.seatInfo},r.a.createElement("div",{className:N.seatInfoLabel,style:{background:"rgb(120, 205, 4)"}}),"Selected Seat")))},Ya=a(324),qa=function(e){var t=e.classes,a=e.selectedMovie,c=Object(H.b)(),o=Object(n.useState)(""),i=Object(s.a)(o,2),l=i[0],u=i[1],m=Object(n.useState)(""),d=Object(s.a)(m,2),p=d[0],f=d[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Book a movie reservation"),r.a.createElement("form",{className:t.form},r.a.createElement(Ke.a,{id:"cinemaSelector",className:t.formControl},r.a.createElement(Qe.a,{id:"cinemaLabel"},0==a.cinemas.length?"No cinemas available":"Cinema:"),r.a.createElement(Zt.a,{labelId:"cinemaLabel",id:"cinemaSelect",value:l,disabled:0==a.cinemas.length,onChange:function(e){u(e.target.value)}},a.cinemas.map((function(e){return r.a.createElement(Xt.a,{key:e.id,value:e.id},e.name)})))),r.a.createElement("br",null),r.a.createElement(Ke.a,{id:"screeningTimeSelector",className:t.formControl},r.a.createElement(Qe.a,{id:"screeningTimeLabel"},0==a.screeningTimes.length?"No screening times available":"Screening time:"),r.a.createElement(Zt.a,{labelId:"screeningTimeLabel",id:"screeningTimeSelect",value:p,disabled:0==a.screeningTimes.length,onChange:function(e){f(e.target.value)}},a.screeningTimes.map((function(e){if(e.cinema_id==l)return r.a.createElement(Xt.a,{key:e.id,value:e.id},Ya(e.datetime_start).format("MMMM Do YYYY, HH:mm"))})))),r.a.createElement(x.a,{type:"button",variant:"contained",color:"primary",disabled:0==a.screeningTimes.length,className:t.formControl,onClick:function(){c({type:"SET_SELECTED_CINEMA",payload:l}),c({type:"SET_SELECTED_SCREENING_TIME",payload:p})}},"Select")))},za=Object(B.a)((function(e){return{formContainer:{width:"50vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",margin:e.spacing(1),opacity:.9,backgroundBlendMode:"screen",backgroundColor:"white"}}})),Ja=function(){var e=Object(H.b)(),t=za(),a=Object(H.c)((function(e){return e.reservationProcessState.currentReservation})),c=Object(H.c)((function(e){return e.reservationProcessState.currentReservation.seats})),o=Object(H.c)((function(e){return e.reservationProcessState.selectedCinema})),i=Object(n.useState)(0),l=Object(s.a)(i,2),u=l[0],m=l[1];Object(n.useEffect)((function(){var t;(function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=m,e.next=3,y.getCinemaTicketPrice(o);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),e((t=document.getElementById("totalPrice").innerHTML,console.log(t),{type:"UPDATE_TOTAL_PRICE",payload:Number(t)}))}),[o,c]);var f=a.seats.filter((function(e){return 1==e.occupied})),g=f.length*u;return r.a.createElement(r.a.Fragment,null,r.a.createElement(na.a,{className:t.table,"aria-label":"simple table"},r.a.createElement(ia.a,null,r.a.createElement(la.a,null,r.a.createElement(ca.a,{align:"left"},"No of seats/tickets"),r.a.createElement(ca.a,null,"Total Price"))),r.a.createElement(ra.a,null,r.a.createElement(la.a,null,r.a.createElement(ca.a,{align:"left",id:"noOfSeats"},f.length),r.a.createElement(ca.a,{id:"totalPrice"},g)))))},Ka=Object(B.a)((function(e){return{wholePage:{backgroundImage:"url(https://image.tmdb.org/t/p/original/jb6Ju38HmKX0bYHCmAxs8HyNeJ2.jpg)",backgroundSize:"cover",width:"100vw",height:"100vh",color:"white"},title:{color:"white",fontSize:"3em",textTransform:"uppercase",width:"70%",marginLeft:"1%"},subtitle:{fontSize:"0.9em",marginLeft:"1%"},summary:{width:"50%",marginLeft:"1%"},ticketsButton:{margin:"auto",textAlign:"center"},buttonDiv:{display:"flex",justifyContent:"center",alignItems:"center",paddingTop:"12%"},formContainer:{width:"50vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",margin:e.spacing(1),opacity:.9,backgroundBlendMode:"screen",backgroundColor:"white"},form:{},formControl:{display:"block",margin:e.spacing(1),minWidth:"100%"},bookMovieFormContainer:{display:"flex",width:"90%",justifyContent:"center"}}})),Qa=function(e){var t=e.match.params.id;console.log(t);var a=Object(H.b)(),c=Object(n.useState)(!0),o=Object(s.a)(c,2),i=o[0],l=o[1],u=Ka(),m=Object(H.c)((function(e){return e.movieState.selectedMovie}));a({type:"SET_SELECTED_MOVIE",payload:t});var f=Object(H.c)((function(e){return e.reservationProcessState.selectedCinema})),g=Object(H.c)((function(e){return e.reservationProcessState.currentReservation.screeningTime_id}));Object(n.useEffect)((function(){(function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(Rt(t));case 2:l(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var b={backgroundImage:"url(".concat(null!=m&&m.backdropImage,")")};return i?null:r.a.createElement("div",{className:u.wholePage,style:b},r.a.createElement(A.a,{component:"h1",className:u.title},m.title),r.a.createElement(A.a,{component:"h4",className:u.subtitle},"Released on ",new Date(m.releaseDate).toDateString()),r.a.createElement(A.a,{component:"h5",className:u.subtitle},r.a.createElement("b",null,"Actors: ",m.actors)),r.a.createElement(A.a,{component:"h6",className:u.subtitle},r.a.createElement("b",null,m.genre.toLowerCase())),r.a.createElement(A.a,{component:"h6",className:u.summary},m.summary),r.a.createElement(pe.a,{fixed:!0,className:u.bookMovieFormContainer},r.a.createElement(T.a,{elevation:3,className:u.formContainer},null!=m&&r.a.createElement(qa,{classes:u,selectedMovie:m})),null!=g&&r.a.createElement(T.a,{elevation:3,className:u.formContainer},r.a.createElement(Ja,null))),null!=f&&r.a.createElement(Va,{selectedScreeningTime:g})," ")},Xa=a(556),Za=Object(B.a)((function(e){return{formContainer:{width:"60vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",margin:e.spacing(1),opacity:.9,padding:"1%",backgroundBlendMode:"screen",backgroundColor:"white"},ticketsButton:{opacity:1}}})),$a=function(){var e=Object(H.b)(),t=Za();Object(n.useEffect)((function(){e(_t())}),[]);var a=Object(H.c)((function(e){return e.movieState.movies})),c=Object(H.c)((function(e){return e.authenticationState.loggedUser}));return r.a.createElement("div",null,a.map((function(e){return r.a.createElement(Xa.Parallax,{key:e.id,bgImage:"".concat(e.backdropImage),bgImageAlt:"movie backdrop image",strength:200},r.a.createElement(T.a,{elevation:3,className:t.formContainer},r.a.createElement(A.a,{component:"h1"},r.a.createElement("b",null,e.title)),r.a.createElement(A.a,{component:"h4"},"Released on ",new Date(e.releaseDate).toDateString()),r.a.createElement(A.a,{component:"h5"},"Actors: ",e.actors),r.a.createElement(A.a,{component:"h6"},"Genres: ",e.genre.toLowerCase()),r.a.createElement(ya.a,{readOnly:!0,defaultValue:e.rating,max:10}),r.a.createElement(A.a,{component:"h6"},e.summary),r.a.createElement(i.b,{to:"/movie/book/".concat(e.id),style:null==c?{pointerEvents:"none"}:null},r.a.createElement(x.a,{type:"button",disabled:null==c,variant:"contained",color:"primary",className:t.ticketsButton},null==c?"Log in to make a reservation":"Buy tickets"))),r.a.createElement("div",{style:{height:"80vh"}}))})))},en=a(324),tn=Object(B.a)({table:{minWidth:650}}),an=function(e){var t=e.reservations,a=(tn(),Object(H.b)()),n=["Movie","Cinema","Seats","Starts at","Ends at","Total price",{name:"Rate movie",options:{filter:!1,sort:!1,empty:!0,customBodyRenderLite:function(e){return r.a.createElement(ya.a,{defaultValue:t[e].ownRating?t[e].ownRating:0,readOnly:!!t[e].ownRating,max:5,name:t[e].id,onChange:function(){var n=Object(p.a)(d.a.mark((function n(r,c){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a(Bt(t[e].id,c));case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()})}}}],c=[];t.map((function(e){console.log(e);var t=e.seats.map((function(e){return e.seat_name})).join(", ");c.push([e.screeningTime_id.movie_id.title,e.screeningTime_id.cinema_id.name,t,en(e.screeningTime_id.datetime_start).format("MMMM Do YYYY, HH:mm"),en(e.screeningTime_id.datetime_end).format("MMMM Do YYYY, HH:mm"),"$".concat(e.totalPrice)])})),console.log(c);return r.a.createElement(Oa.a,{title:"My reservations",data:c,columns:n,options:{filterType:"checkbox",selectableRows:"none",downloadOptions:{filename:"MyReservations.csv",separator:";"}}})},nn=Object(B.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},Paper:{height:"fit-content"}}})),rn=function(){var e=Object(H.b)(),t=nn(),a=Object(Oe.default)(t.paper,t.fixedHeight),c=Object(H.c)((function(e){return e.reservationsState.reservationsForUser})),o=Object(H.c)((function(e){return e.authenticationState.loggedUser.id}));return Object(n.useEffect)((function(){var t;e((t=o,function(){var e=Object(p.a)(d.a.mark((function e(a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mt.getReservationsForUser(t);case 2:n=e.sent,a({type:"GET_RESERVATIONS_FOR_USER",payload:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),[]),r.a.createElement(_.a,{container:!0,spacing:3},r.a.createElement(_.a,{item:!0,xs:12,md:12,lg:12},r.a.createElement(T.a,{className:"".concat(a," ").concat(t.Paper)},r.a.createElement(an,{reservations:c}))))},cn=a(368),on=(a(832),a(557)),ln=a.n(on)()("http://localhost:3001"),sn=function(){console.log("socket is ",ln);return ln.on("sendMsgToClient",(function(e){Object(cn.addResponseMessage)(e.message.message)})),r.a.createElement("div",null,r.a.createElement(i.a,null,r.a.createElement(lt,null),r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/login"},r.a.createElement(de,null)),r.a.createElement(l.b,{path:"/register"},r.a.createElement(Ee,null)),r.a.createElement(w,{path:"/admin/dashboard"},r.a.createElement(ze,null,r.a.createElement(Ft,null))),r.a.createElement(w,{path:"/admin/cinemas"},r.a.createElement(ze,null,r.a.createElement(St,null))),r.a.createElement(w,{path:"/admin/movies"},r.a.createElement(ze,null,r.a.createElement(Vt,null))),r.a.createElement(w,{path:"/admin/screeningtimes"},r.a.createElement(ze,null,r.a.createElement(ga,null))),r.a.createElement(w,{path:"/admin/reservations"},r.a.createElement(ze,null,r.a.createElement(xa,null))),r.a.createElement(w,{path:"/admin/statistics"},r.a.createElement(ze,null,r.a.createElement(va,null))),r.a.createElement(j,{path:"/user/dashboard",component:ot}),r.a.createElement(j,{path:"/user/reservations",component:rn}),r.a.createElement(l.b,{path:"/movies",component:$a}),r.a.createElement(j,{path:"/movie/book/:id",component:Qa}),r.a.createElement(l.b,{path:"/"},r.a.createElement(Qt,null)))),r.a.createElement(cn.Widget,{title:"Cinema Chat",subtitle:"Chat with fellow users here! :)",senderPlaceHolder:"Hey, do you have a movie recommendation for me?",handleNewUserMessage:function(e){ln.emit("sendMsgToServer",{message:e})},profileAvatar:"https://cdn2.iconfinder.com/data/icons/circular-icons-line/82/Circular_Person-512.png"}))},un=a(93),mn=a(558),dn=a(559),pn={loggedUser:null,token:localStorage.getItem("userToken")},fn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCESS":return console.log(t.payload),localStorage.setItem("userToken",t.payload.token),localStorage.setItem("loggedUser",JSON.stringify(t.payload.user)),Object(he.a)(Object(he.a)({},e),{},{loggedUser:t.payload.user,token:t.payload.token});case"SET_ACTIVE_USER":return Object(he.a)(Object(he.a)({},e),{},{loggedUser:t.payload});case"LOGIN_FAIL":case"LOGOUT":return e=Object(he.a)(Object(he.a)({},e),{},{loggedUser:null,token:null}),pn;default:return e}},gn=a(185),bn={cinemas:[],availableCinemas:[]},En=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_CINEMAS":case"GET_AVAILABLE_CINEMAS":return e=Object(he.a)(Object(he.a)({},e),{},{cinemas:t.payload});case"ADD_NEW_CINEMA":return e=Object(he.a)(Object(he.a)({},e),{},{cinemas:Object(gn.a)(e.cinemas.concat(t.payload))});default:return e}},vn={movies:[],selectedMovie:null},hn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_MOVIES":return e=Object(he.a)(Object(he.a)({},e),{},{movies:t.payload});case"GET_MOVIE_BY_ID":return e=Object(he.a)(Object(he.a)({},e),{},{selectedMovie:t.payload});case"ADD_NEW_MOVIE":return e=Object(he.a)(Object(he.a)({},e),{},{movies:Object(gn.a)(e.movies.concat(t.payload))});default:return e}},On={screening_times:[],availableScreeningTimes:[]},yn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:On,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_SCREENING_TIMES":case"GET_AVAILABLE_SCREENING_TIMES":return e=Object(he.a)(Object(he.a)({},e),{},{screening_times:t.payload});default:return e}},jn={seatsForSelectedScreeningTime:[],selectedCinema:null,selectedMovie:null,currentReservation:{screeningTime_id:null,user_id:localStorage.getItem("loggedUser")?JSON.parse(localStorage.getItem("loggedUser")).id:null,seats:[],totalPrice:0}},wn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_SEATS_FOR_SELECTED_SCREENING_TIME":case"SET_OCCUPIED_SEATS":return e=Object(he.a)(Object(he.a)({},e),{},{seatsForSelectedScreeningTime:t.payload});case"SET_PICKED_SEATS":return e=Object(he.a)(Object(he.a)({},e),{},{currentReservation:Object(he.a)(Object(he.a)({},e.currentReservation),{},{seats:t.payload})});case"SET_SELECTED_CINEMA":return e=Object(he.a)(Object(he.a)({},e),{},{selectedCinema:t.payload});case"SET_SELECTED_SCREENING_TIME":return e=Object(he.a)(Object(he.a)({},e),{},{currentReservation:Object(he.a)(Object(he.a)({},e.currentReservation),{},{screeningTime_id:t.payload})});case"SET_SELECTED_MOVIE":return e=Object(he.a)(Object(he.a)({},e),{},{selectedMovie:t.payload});case"UPDATE_TOTAL_PRICE":return e=Object(he.a)(Object(he.a)({},e),{},{currentReservation:Object(he.a)(Object(he.a)({},e.currentReservation),{},{totalPrice:t.payload})});case"SET_ORDER_ID":return e=Object(he.a)(Object(he.a)({},e),{},{currentReservation:Object(he.a)(Object(he.a)({},e.currentReservation),{},{paypalOrderId:t.payload})});default:return e}},Sn={reservations:[],reservationsForUser:[]},xn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sn,t=arguments.length>1?arguments[1]:void 0;switch(console.log("action payload",t.payload),t.type){case"GET_RESERVATIONS":return e=Object(he.a)(Object(he.a)({},e),{},{reservations:t.payload});case"GET_RESERVATIONS_FOR_USER":return e=Object(he.a)(Object(he.a)({},e),{},{reservationsForUser:t.payload});case"RATE_RESERVATION":return e=Object(he.a)(Object(he.a)({},e),{},{reservationsForUser:e.reservationsForUser.map((function(e){return t.payload.id==e.id?t.payload:e}))}),console.log("new state",e),e;default:return e}},Cn={chat_messages:[]},kn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_MESSAGE":return e=Object(he.a)(Object(he.a)({},e),{},{chat_messages:[].concat(Object(gn.a)(e.chat_messages),[t.payload])});default:return e}},Nn=Object(un.combineReducers)({authenticationState:fn,cinemaState:En,movieState:hn,screeningTimeState:yn,reservationProcessState:wn,reservationsState:xn,chatState:kn}),Tn=Object(un.createStore)(Nn,Object(dn.composeWithDevTools)(Object(un.applyMiddleware)(mn.a)));o.a.render(r.a.createElement(H.a,{store:Tn},r.a.createElement(sn,null)),document.getElementById("root"))}},[[598,1,2]]]);
//# sourceMappingURL=main.4e8cd1b5.chunk.js.map